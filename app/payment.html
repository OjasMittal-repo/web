<script>
    document.addEventListener('DOMContentLoaded', function() {
      const planSelect = document.getElementById('plan-select');
      const currencySelect = document.getElementById('currency-select');
      const voucherInput = document.getElementById('voucher-code');
      const planDetails = document.getElementById('plan-details');
      const planName = planDetails.querySelector('.plan-name');
      const planPrice = planDetails.querySelector('.plan-price');
      const planFeatures = document.getElementById('plan-features');
      const totalAmount = document.getElementById('total-amount');
      const submitPayment = document.getElementById('submit-payment');
      const submitButtonText = document.getElementById('button-text');
      const successModal = document.getElementById('success-modal');
      const spinner = document.getElementById('spinner');
    
      const plans = {
        premium: {
          name: 'Premium Membership',
          priceUSD: 9.99,
          priceINR: 799,
          features: [
            'Unlimited premium newsletters',
            'Ad-free reading experience',
            'Early access to new content',
            'Exclusive member-only newsletters'
          ]
        },
        standard: {
          name: 'Standard Membership',
          priceUSD: 4.99,
          priceINR: 399,
          features: [
            'Access to selected newsletters',
            'Ad-supported reading experience'
          ]
        }
      };
    
      function updateSummary() {
        const selectedPlan = planSelect.value;
        const selectedCurrency = currencySelect.value;
        const voucherCode = voucherInput.value.trim().toUpperCase();
        const plan = plans[selectedPlan];
    
        planName.textContent = plan.name;
        planFeatures.innerHTML = plan.features.map(f => `<li><i class="fas fa-check"></i> ${f}</li>`).join('');
    
        let price = selectedCurrency === 'usd' ? plan.priceUSD : plan.priceINR;
        let currencySymbol = selectedCurrency === 'usd' ? '$' : 'â‚¹';
    
        if (voucherCode === 'SAVE10') {
          price = (price * 0.9).toFixed(2); // 10% off
        }
    
        planPrice.innerHTML = `${currencySymbol}${price}<span style="font-size: 16px; color: var(--text-light);">/month</span>`;
        totalAmount.innerHTML = `${currencySymbol}${price}/month`;
        submitButtonText.textContent = `Pay ${currencySymbol}${price}/month`;
      }
    
      planSelect.addEventListener('change', updateSummary);
      currencySelect.addEventListener('change', updateSummary);
      voucherInput.addEventListener('input', updateSummary);
    
      submitPayment.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Start Processing State
        submitButtonText.textContent = "Processing...";
        spinner.style.display = 'inline-block'; // Show spinner
        spinner.classList.add('fa-spin');
    
        // Fake payment delay
        setTimeout(() => {
          spinner.style.display = 'none'; // Hide spinner
          spinner.classList.remove('fa-spin');
          submitButtonText.textContent = "Payment Successful!";
    
          successModal.style.display = 'flex';
    
          // Redirect after showing success
          setTimeout(() => {
            window.location.href = '/subscriptions.html';
          }, 3000);
    
        }, 2000);
      });
    
      updateSummary(); // Initialize
    });
    </script>
    